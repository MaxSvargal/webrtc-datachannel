{"version":3,"sources":["/index.ts","/src/index.ts"],"names":[],"mappings":"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","file":"","sourcesContent":["import WebRTC from './src'\n\nconst rtc = new WebRTC({\n  connection: {\n    iceServers: [\n      { urls: [ 'stun:stun.l.google.com:19302' ] }\n    ]\n  }\n})\n\nrtc.on('icecandidate', (candidate) => console.log(candidate))\nrtc.on('open', () => console.log('open'))\nrtc.on('message', (message) => console.log('message', message))\nrtc.on('datachannel', (event) => console.log('datachannel', event))\n\nrtc.createChannel()\n\nrtc.on('negotiationneeded', async () => {\n  console.log('negotiationneeded')\n  const offer = await rtc.createOffer()\n  console.log(offer.sdp)\n})\n\nconst peerForm = document.getElementById('peer')\npeerForm.addEventListener('submit', (e) => {\n  e.preventDefault()\n  console.log(e.target[0].value)\n})\n","\nimport { EventEmitter } from 'events'\n\ninterface IOptions {\n  connection: RTCConfiguration\n}\n\nexport default class WebRTC extends EventEmitter {\n  private rpc: RTCPeerConnection\n\n  constructor({ connection }: IOptions) {\n    super()\n    this.rpc = new RTCPeerConnection(connection)\n    console.log(this.rpc)\n    this.rpc.onicecandidate = candidate => this.emit('icecandidate', candidate)\n    this.rpc.onnegotiationneeded = () => this.emit('negotiationneeded')\n    this.rpc.ondatachannel = event => this.emit('datachannel', event)\n  }\n\n  createOffer = async () => {\n    const offer = await this.rpc.createOffer()\n    await this.rpc.setLocalDescription(offer)\n    return offer\n  }\n\n  createChannel = (name = 'chat') => {\n    const channel = this.rpc.createDataChannel(name)\n    channel.onopen = () => this.emit('channelopen')\n    channel.onmessage = ({ data }) => this.emit('message', data)\n    return channel\n  }\n}"]}